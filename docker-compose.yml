services:
  app:
    build: 
      context: .
      dockerfile: Dockerfile
    volumes:
      - .:/app
    ports:
      - "5173:5173"
      - "5174:5174" # Viteã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨
    environment:
      - CHOKIDAR_USEPOLLING=true # Windows/Macã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆæ™‚ã®ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ¤œçŸ¥ç”¨
    # C++ã®ãƒ“ãƒ«ãƒ‰(Wasmç”Ÿæˆ) -> NPMã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« -> ã‚µãƒ¼ãƒãƒ¼èµ·å‹• ã‚’å…¨è‡ªå‹•åŒ–
    command: >
      bash -c "
      echo 'ğŸ—ï¸ Building C++ to WebAssembly...' &&
      make &&
      echo 'ğŸ“¦ Installing Node dependencies...' &&
      cd frontend &&
      npm install &&
      echo 'ğŸš€ Starting Vite Dev Server...' &&
      npm run dev -- --host 0.0.0.0 --port 5173
      "
